import{j as e,r as n,y as h,l as v,u as d,a as N,s as f,R as g,b as D,c as x,d as j,e as A}from"./index-mOeXiOYv.js";function E(){return e.jsxDEV("div",{children:[e.jsxDEV("h1",{children:"Welcome to the School Management System"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/components/dashboard/Dashboard.jsx",lineNumber:4,columnNumber:7},this),e.jsxDEV("p",{children:"Here you can manage directors, deputies, teachers, and pupils."},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/components/dashboard/Dashboard.jsx",lineNumber:5,columnNumber:7},this),e.jsxDEV("button",{onClick:()=>alert("Register Director"),children:"Register Director"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/components/dashboard/Dashboard.jsx",lineNumber:6,columnNumber:7},this),e.jsxDEV("button",{onClick:()=>alert("Register Deputy"),children:"Register Deputy"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/components/dashboard/Dashboard.jsx",lineNumber:7,columnNumber:7},this),e.jsxDEV("button",{onClick:()=>alert("Register Teacher"),children:"Register Teacher"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/components/dashboard/Dashboard.jsx",lineNumber:8,columnNumber:7},this),e.jsxDEV("button",{onClick:()=>alert("Register Pupil"),children:"Register Pupil"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/components/dashboard/Dashboard.jsx",lineNumber:9,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/components/dashboard/Dashboard.jsx",lineNumber:3,columnNumber:5},this)}const _="_modalBackdrop_1r22p_1",U="_modalContent_1r22p_14",H="_closeButton_1r22p_28",m={modalBackdrop:_,modalContent:U,closeButton:H};function G(){const[a,o]=n.useState({adminEmail:"",adminPassword:""}),r=n.useCallback(l=>{const{name:s,value:i}=l.target;o(t=>({...t,[s]:i}))},[]),u=async l=>{l.preventDefault();const{adminEmail:s,adminPassword:i}=a;if(!s||!i){h.error("Both email and password are required!");return}try{const t=await v(a);console.log("Login success:",t),h.success("Login successful!")}catch(t){console.error("Login error:",t),h.error("Login failed. Please try again.")}};return e.jsxDEV("form",{onSubmit:u,children:[e.jsxDEV("h2",{children:"Admin Login"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalForm/LoginForm.jsx",lineNumber:37,columnNumber:7},this),e.jsxDEV("input",{type:"email",name:"adminEmail",placeholder:"Admin Email",value:a.adminEmail,onChange:r,required:!0},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalForm/LoginForm.jsx",lineNumber:38,columnNumber:7},this),e.jsxDEV("input",{type:"password",name:"adminPassword",placeholder:"Admin Password",value:a.adminPassword,onChange:r,required:!0},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalForm/LoginForm.jsx",lineNumber:46,columnNumber:7},this),e.jsxDEV("button",{type:"submit",children:"Login"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalForm/LoginForm.jsx",lineNumber:54,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalForm/LoginForm.jsx",lineNumber:36,columnNumber:5},this)}function V({isOpen:a,onClose:o,type:r,onSubmit:u}){const l=d(),s=N(f),i=!!(s!=null&&s.uid),t=n.useCallback(c=>{c.key==="Escape"&&o()},[o]);n.useEffect(()=>(a&&window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}),[a,t]);const p=async()=>{try{await l(x()).unwrap(),l(j()),alert("User logged out")}catch(c){alert(c.message)}o()},b=()=>{if(i)return e.jsxDEV("div",{children:[e.jsxDEV("p",{children:s.displayName||"User"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalAuth/ModalAuth.jsx",lineNumber:52,columnNumber:11},this),e.jsxDEV("button",{className:m.authButtonLogout,onClick:p,children:"Log out"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalAuth/ModalAuth.jsx",lineNumber:53,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalAuth/ModalAuth.jsx",lineNumber:51,columnNumber:9},this);switch(r){case"register":return e.jsxDEV(D,{onSubmit:u},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalAuth/ModalAuth.jsx",lineNumber:62,columnNumber:16},this);case"login":return e.jsxDEV(G,{onClose:o},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalAuth/ModalAuth.jsx",lineNumber:64,columnNumber:16},this);default:return null}};return a?g.createPortal(e.jsxDEV("div",{className:m.modalBackdrop,onClick:o,children:e.jsxDEV("div",{className:m.modalContent,onClick:c=>c.stopPropagation(),children:[e.jsxDEV("button",{className:m.closeButton,onClick:o,children:"Ã—"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalAuth/ModalAuth.jsx",lineNumber:78,columnNumber:9},this),b()]},void 0,!0,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalAuth/ModalAuth.jsx",lineNumber:77,columnNumber:7},this)},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/features/auth/modalAuth/ModalAuth.jsx",lineNumber:76,columnNumber:5},this),document.body):null}function y(){const a=d(),[o,r]=n.useState({isLoggedIn:!1,isRegistered:!1,isModalOpen:!1}),u=n.useCallback(()=>{console.log("User logged in"),r(s=>({...s,isLoggedIn:!0}))},[]),l=n.useCallback(async s=>{console.log("Registering user with data:",s);try{await a(A(s)).unwrap(),console.log("User successfully registered"),r(i=>({...i,isRegistered:!0,isModalOpen:!1}))}catch(i){console.error("Registration failed:",i.message)}},[a]);return o.isLoggedIn?e.jsxDEV(E,{},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/pages/homePage/index.jsx",lineNumber:39,columnNumber:12},this):e.jsxDEV("div",{children:[e.jsxDEV("button",{onClick:()=>r(s=>({...s,isModalOpen:!0})),children:"Open Auth Modal"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/pages/homePage/index.jsx",lineNumber:43,columnNumber:7},this),e.jsxDEV(V,{isOpen:o.isModalOpen,onClose:()=>r(s=>({...s,isModalOpen:!1})),type:"register",onSubmit:l},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/pages/homePage/index.jsx",lineNumber:46,columnNumber:7},this),o.isRegistered?e.jsxDEV("div",{children:[e.jsxDEV("h2",{children:"Login"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/pages/homePage/index.jsx",lineNumber:58,columnNumber:11},this),e.jsxDEV("button",{onClick:u,children:"Login"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/pages/homePage/index.jsx",lineNumber:59,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/pages/homePage/index.jsx",lineNumber:57,columnNumber:9},this):e.jsxDEV("div",{children:e.jsxDEV("h2",{children:"Registration Form"},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/pages/homePage/index.jsx",lineNumber:54,columnNumber:11},this)},void 0,!1,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/pages/homePage/index.jsx",lineNumber:53,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/viravira/Documents/GitHub/schoolApp/school_app/src/pages/homePage/index.jsx",lineNumber:42,columnNumber:5},this)}export{y as default};
